<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>condic</title>
	<script>
		window.jQuery = window.$ = require("./jquery-2.2.1.min.js");
		var Dicman = require("./1line-dic.js");
		var arka = new Dicman("arka.txt");
		var arkadic = [];
		arka.searchByKey("", 1, function(entry) {
			if (!entry) {
				return;
			}
			arkadic.push(entry);
		});
		var out;
		$(function() {
			out = $("#out");
			$("#searchInput").on("input", function(e) {
				out.empty();
				//$("#num").empty();
				var val = $(this).val();
				if (!val) {
					return;
				}

				var count = 0;
				var startTime = new Date();

				//*
				setTimeout(function() {
					arka.searchByKey(val, 1, function(entry) {
						if (!entry) {
							var endTime = new Date();
							$("#num").text(count + " words [" + (endTime.getTime() - startTime.getTime()) + "ms]");
							return;
						}
						$("<dt>").text(entry.word).appendTo(out);
						$("<dd>").html(entry.exp.replace(/\n/g, "<br>")).appendTo(out);
						count++;
					});
				}, 0);
			});
		});
	</script>
	<style>
		html {
			font-family: "kardinal", Meiryo, Arial, sans-serif;
		}
		dt {
			font-weight: bold;
		}
		dd {
			font-size: 80%;
			border-bottom: 1px solid #aaa;
			margin-left: 0.5em;
			padding-bottom: 0.6em;
			margin-bottom: 0.6em;
		}
		#num {
			font-family: Arial, sans-serif;
		}
	</style>
</head>
<body>
	<input type="text" id="searchInput"> <span id="num">0</span>
	<dl id="out"></dl>
</body>
</html>
